{"ast":null,"code":"import axios from \"axios\";\nconst IP_URL = \"http://10.25.15.102:8000\"; // Your IP address\nconst LOCAL_URL = \"http://127.0.0.1:8000\"; // Local URL\nconst LOCALHOST_URL = \"http://localhost:8000\"; // Localhost URL\n\nasync function fetchWithFallback(datapath, options = {}, method = \"GET\") {\n  const urls = [LOCALHOST_URL, LOCAL_URL, IP_URL];\n\n  // Check if datapath contains \"/user\"\n  if (!datapath.includes(\"/user\")) {\n    try {\n      const response = await axios({\n        url: datapath.replace(LOCALHOST_URL, IP_URL).replace(LOCAL_URL, IP_URL),\n        method: method,\n        ...options,\n        timeout: 5000\n      });\n      return response.data;\n    } catch (error) {\n      console.error(\"Error fetching data from IP_URL:\", error);\n    }\n  }\n\n  // Try each URL in sequence\n  for (const baseUrl of urls) {\n    try {\n      // Replace the base URL part of the path\n      const currentPath = datapath.replace(LOCALHOST_URL, baseUrl).replace(LOCAL_URL, baseUrl);\n\n      // Check if the URL exists using a GET request with a short timeout\n      await axios.get(currentPath, {\n        timeout: 2000\n      });\n\n      // If the URL exists, send the actual request\n      const response = await axios({\n        url: currentPath,\n        method: method,\n        ...options,\n        // Add timeout to prevent hanging\n        timeout: 5000\n      });\n      return response.data;\n    } catch (error) {\n      console.error(`Error checking or fetching data from ${baseUrl}:`, error);\n    }\n  }\n}\nexport async function getData(datapath) {\n  return await fetchWithFallback(datapath);\n}\nexport async function getDataDynamic(datapath, token = null) {\n  const config = token ? {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  } : {};\n  return await fetchWithFallback(datapath, config);\n}\nexport async function fetchUserDetails(token = null) {\n  const config = token ? {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  } : {};\n  return await fetchWithFallback(\"http://localhost:8000/researcher/researcher/auto_login\", config, \"POST\");\n}\nexport async function postData(datapath, header, data) {\n  return await fetchWithFallback(datapath, {\n    data: data,\n    headers: header\n  }, \"POST\");\n}\nexport async function postData2(datapath, data, config) {\n  return await fetchWithFallback(datapath, {\n    data: data,\n    ...config\n  }, \"POST\");\n}\nexport async function putData(datapath, header, data) {\n  return await fetchWithFallback(datapath, {\n    data: data,\n    headers: {\n      authorization: `${header}`\n    }\n  }, \"PUT\");\n}\nexport async function patchData(datapath, header, data) {\n  return await fetchWithFallback(datapath, {\n    data: data,\n    headers: {\n      authorization: `${header}`\n    }\n  }, \"PATCH\");\n}\nexport async function getImgData(datapath) {\n  try {\n    const response = await fetchWithFallback(datapath, {\n      responseType: \"blob\"\n    });\n    return URL.createObjectURL(response);\n  } catch (error) {\n    console.error(\"Error fetching image data:\", error);\n    throw error;\n  }\n}","map":{"version":3,"names":["axios","IP_URL","LOCAL_URL","LOCALHOST_URL","fetchWithFallback","datapath","options","method","urls","includes","response","url","replace","timeout","data","error","console","baseUrl","currentPath","get","getData","getDataDynamic","token","config","headers","Authorization","fetchUserDetails","postData","header","postData2","putData","authorization","patchData","getImgData","responseType","URL","createObjectURL"],"sources":["D:/project/SE-LABS-Website/src/api/api-method.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst IP_URL = \"http://10.25.15.102:8000\"; // Your IP address\r\nconst LOCAL_URL = \"http://127.0.0.1:8000\"; // Local URL\r\nconst LOCALHOST_URL = \"http://localhost:8000\"; // Localhost URL\r\n\r\nasync function fetchWithFallback(datapath, options = {}, method = \"GET\") {\r\n    const urls = [LOCALHOST_URL, LOCAL_URL, IP_URL];\r\n\r\n    // Check if datapath contains \"/user\"\r\n    if (!datapath.includes(\"/user\")) {\r\n        try {\r\n            const response = await axios({\r\n                url: datapath\r\n                    .replace(LOCALHOST_URL, IP_URL)\r\n                    .replace(LOCAL_URL, IP_URL),\r\n                method: method,\r\n                ...options,\r\n                timeout: 5000,\r\n            });\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error(\"Error fetching data from IP_URL:\", error);\r\n        }\r\n    }\r\n\r\n    // Try each URL in sequence\r\n    for (const baseUrl of urls) {\r\n        try {\r\n            // Replace the base URL part of the path\r\n            const currentPath = datapath\r\n                .replace(LOCALHOST_URL, baseUrl)\r\n                .replace(LOCAL_URL, baseUrl);\r\n\r\n            // Check if the URL exists using a GET request with a short timeout\r\n            await axios.get(currentPath, { timeout: 2000 });\r\n\r\n            // If the URL exists, send the actual request\r\n            const response = await axios({\r\n                url: currentPath,\r\n                method: method,\r\n                ...options,\r\n                // Add timeout to prevent hanging\r\n                timeout: 5000,\r\n            });\r\n\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error(\r\n                `Error checking or fetching data from ${baseUrl}:`,\r\n                error\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport async function getData(datapath) {\r\n    return await fetchWithFallback(datapath);\r\n}\r\n\r\nexport async function getDataDynamic(datapath, token = null) {\r\n    const config = token\r\n        ? {\r\n              headers: {\r\n                  \"Content-Type\": \"application/json\",\r\n                  Authorization: `Bearer ${token}`,\r\n              },\r\n          }\r\n        : {};\r\n    return await fetchWithFallback(datapath, config);\r\n}\r\n\r\nexport async function fetchUserDetails(token = null) {\r\n    const config = token\r\n        ? {\r\n              headers: {\r\n                  Authorization: `Bearer ${token}`,\r\n              },\r\n          }\r\n        : {};\r\n    return await fetchWithFallback(\r\n        \"http://localhost:8000/researcher/researcher/auto_login\",\r\n        config,\r\n        \"POST\"\r\n    );\r\n}\r\n\r\nexport async function postData(datapath, header, data) {\r\n    return await fetchWithFallback(\r\n        datapath,\r\n        {\r\n            data: data,\r\n            headers: header,\r\n        },\r\n        \"POST\"\r\n    );\r\n}\r\n\r\nexport async function postData2(datapath, data, config) {\r\n    return await fetchWithFallback(\r\n        datapath,\r\n        {\r\n            data: data,\r\n            ...config,\r\n        },\r\n        \"POST\"\r\n    );\r\n}\r\n\r\nexport async function putData(datapath, header, data) {\r\n    return await fetchWithFallback(\r\n        datapath,\r\n        {\r\n            data: data,\r\n            headers: {\r\n                authorization: `${header}`,\r\n            },\r\n        },\r\n        \"PUT\"\r\n    );\r\n}\r\n\r\nexport async function patchData(datapath, header, data) {\r\n    return await fetchWithFallback(\r\n        datapath,\r\n        {\r\n            data: data,\r\n            headers: {\r\n                authorization: `${header}`,\r\n            },\r\n        },\r\n        \"PATCH\"\r\n    );\r\n}\r\n\r\nexport async function getImgData(datapath) {\r\n    try {\r\n        const response = await fetchWithFallback(datapath, {\r\n            responseType: \"blob\",\r\n        });\r\n        return URL.createObjectURL(response);\r\n    } catch (error) {\r\n        console.error(\"Error fetching image data:\", error);\r\n        throw error;\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}