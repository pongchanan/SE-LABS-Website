{"ast":null,"code":"import axios from \"axios\";\nconst IP_URL = \"http://0.0.0.0:8000\"; // Your IP address\nconst LOCAL_URL = \"http://127.0.0.1:8000\"; // Local URL\nconst LOCALHOST_URL = \"http://localhost:8000\"; // Localhost URL\n\nasync function fetchWithFallback(datapath, options = {}) {\n  const urls = [LOCALHOST_URL, LOCAL_URL, IP_URL];\n\n  // Try each URL in sequence\n  for (const baseUrl of urls) {\n    try {\n      // Replace the base URL part of the path\n      const currentPath = datapath.replace(LOCALHOST_URL, baseUrl).replace(LOCAL_URL, baseUrl);\n      const response = await axios({\n        url: currentPath,\n        ...options,\n        // Add timeout to prevent hanging\n        timeout: 5000\n      });\n      return response.data;\n    } catch (error) {}\n  }\n}\nexport async function getData(datapath) {\n  return await fetchWithFallback(datapath);\n}\nexport async function getDataAndHeader(datapath, header) {\n  return await fetchWithFallback(datapath, {\n    headers: {\n      authorization: `${header}`\n    }\n  });\n}\nexport async function getDataDynamic(datapath, token = null) {\n  const config = token ? {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  } : {};\n  return await fetchWithFallback(datapath, config);\n}\nexport async function fetchUserDetails(token = null) {\n  const config = token ? {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  } : {};\n  return await fetchWithFallback(\"http://localhost:8000/researcher/researcher/auto_login\", config);\n}\nexport async function postData(datapath, header, data) {\n  return await fetchWithFallback(datapath, {\n    method: \"post\",\n    data: data,\n    headers: header\n  });\n}\nexport async function postData2(datapath, data, config) {\n  return await fetchWithFallback(datapath, {\n    method: \"post\",\n    data: data,\n    ...config\n  });\n}\nexport async function putData(datapath, header, data) {\n  return await fetchWithFallback(datapath, {\n    method: \"put\",\n    data: data,\n    headers: {\n      authorization: `${header}`\n    }\n  });\n}\nexport async function patchData(datapath, header, data) {\n  return await fetchWithFallback(datapath, {\n    method: \"patch\",\n    data: data,\n    headers: {\n      authorization: `${header}`\n    }\n  });\n}\nexport async function getImgData(datapath) {\n  try {\n    const response = await fetchWithFallback(datapath, {\n      responseType: \"blob\"\n    });\n    return URL.createObjectURL(response);\n  } catch (error) {\n    console.error(\"Error fetching image data:\", error);\n    throw error;\n  }\n}","map":{"version":3,"names":["axios","IP_URL","LOCAL_URL","LOCALHOST_URL","fetchWithFallback","datapath","options","urls","baseUrl","currentPath","replace","response","url","timeout","data","error","getData","getDataAndHeader","header","headers","authorization","getDataDynamic","token","config","Authorization","fetchUserDetails","postData","method","postData2","putData","patchData","getImgData","responseType","URL","createObjectURL","console"],"sources":["D:/project/SE-LABS-Website/src/api/api-method.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst IP_URL = \"http://0.0.0.0:8000\"; // Your IP address\r\nconst LOCAL_URL = \"http://127.0.0.1:8000\"; // Local URL\r\nconst LOCALHOST_URL = \"http://localhost:8000\"; // Localhost URL\r\n\r\nasync function fetchWithFallback(datapath, options = {}) {\r\n  const urls = [LOCALHOST_URL, LOCAL_URL, IP_URL];\r\n\r\n  // Try each URL in sequence\r\n  for (const baseUrl of urls) {\r\n    try {\r\n      // Replace the base URL part of the path\r\n      const currentPath = datapath\r\n        .replace(LOCALHOST_URL, baseUrl)\r\n        .replace(LOCAL_URL, baseUrl);\r\n\r\n      const response = await axios({\r\n        url: currentPath,\r\n        ...options,\r\n        // Add timeout to prevent hanging\r\n        timeout: 5000,\r\n      });\r\n\r\n      return response.data;\r\n    } catch (error) {}\r\n  }\r\n}\r\n\r\nexport async function getData(datapath) {\r\n  return await fetchWithFallback(datapath);\r\n}\r\n\r\nexport async function getDataAndHeader(datapath, header) {\r\n  return await fetchWithFallback(datapath, {\r\n    headers: {\r\n      authorization: `${header}`,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getDataDynamic(datapath, token = null) {\r\n  const config = token\r\n    ? {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    : {};\r\n  return await fetchWithFallback(datapath, config);\r\n}\r\n\r\nexport async function fetchUserDetails(token = null) {\r\n  const config = token\r\n    ? {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    : {};\r\n  return await fetchWithFallback(\r\n    \"http://localhost:8000/researcher/researcher/auto_login\",\r\n    config\r\n  );\r\n}\r\n\r\nexport async function postData(datapath, header, data) {\r\n  return await fetchWithFallback(datapath, {\r\n    method: \"post\",\r\n    data: data,\r\n    headers: header,\r\n  });\r\n}\r\n\r\nexport async function postData2(datapath, data, config) {\r\n  return await fetchWithFallback(datapath, {\r\n    method: \"post\",\r\n    data: data,\r\n    ...config,\r\n  });\r\n}\r\n\r\nexport async function putData(datapath, header, data) {\r\n  return await fetchWithFallback(datapath, {\r\n    method: \"put\",\r\n    data: data,\r\n    headers: {\r\n      authorization: `${header}`,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function patchData(datapath, header, data) {\r\n  return await fetchWithFallback(datapath, {\r\n    method: \"patch\",\r\n    data: data,\r\n    headers: {\r\n      authorization: `${header}`,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getImgData(datapath) {\r\n  try {\r\n    const response = await fetchWithFallback(datapath, {\r\n      responseType: \"blob\",\r\n    });\r\n    return URL.createObjectURL(response);\r\n  } catch (error) {\r\n    console.error(\"Error fetching image data:\", error);\r\n    throw error;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}